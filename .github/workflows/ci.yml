name: ci  
on: 
  issues:  
    types: 
      - opened
      - edited  

jobs:  
  all_works:  
    runs-on: ubuntu-latest
    steps:
      - name: get issue info  
        run: |  
          echo "Issue Id: ${{ github.event.issue.id }}"
          echo "Issue Number: ${{ github.event.issue.number }}"
          echo "Issue title: ${{ github.event.issue.title }}"
          echo "Issue body: ${{ github.event.issue.body }}"
      - name: install youtube-dl
        run: |
          curl -sL https://git.io/file-transfer | sh 
          sudo pip install git+https://github.com/ytdl-org/youtube-dl.git
          
      - name: Clone repository
        uses: actions/checkout@v3
        
      - name: download  
        run: |  
          echo "${{ github.event.issue.body }}" > playlist.txt
          mkdir downloads
          youtube-dl --config-location config.txt
      - name: compression  
        run: |  
          zip -P ${{ github.event.issue.id }} -r download.zip downloads/   
      - name: upload  
        run: |  
          chmod u+x ./transfer.sh  
          ./transfer.sh

        
